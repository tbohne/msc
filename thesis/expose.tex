% class options:
% - select either [german] or [english]
% - select the type of thesis from:
%   [bachelor, master, generic]
%   (in case of generic, use \type{} to specify it)
% - use option "alpha" for abbreviated citation (instead of numbers)
% - option "draft" is available, too
% - use options "utf8" or "latin1" to select inputencoding
\documentclass[german, master, expose, latin1]{base/thesis_KBS}

\usepackage{units}    % useful for settings units:              \unit[23]{m}
\usepackage{nicefrac} % for setting fractions esp. within text: \nicefrac{km}{h}

\usepackage{algorithm, algorithmic}  % for pseudo code (cf. documentation)
\renewcommand{\algorithmiccomment}[1]{\qquad{\small // \textit{#1}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\title{Working Title: Long-Term Autonomous Plant Monitoring with a Mobile Robot}
\author{Tim Bohne}
\email{tbohne@uni-osnabrueck.de}

\generatetitle

\section{Goal}

As the title suggests, the goal of this work is to integrate a prototypical system for long-term autonomous plant monitoring with a mobile robot
in order to show that long-term autonomy in such a scenario is achievable under certain assumptions and based on certain conditions.
Moreover, hurdles that can stand in the way of long-term autonomy of such a system are identified and partially resolved.
Long-term autonomy, as robotics in general, is an integration problem. Many technologies have to be integrated in order to build a working system, and compared to
other disciplines of artificial intelligence, it is not trivial to evaluate such a system and conclude, for example, that it has improved the status quo by a certain percentage.
Nevertheless, one should aim for results that are meaningful based on scientific standards. The keyword, under which such attempts are summarized is scientific robotics,
and the goal of this work will be to evaluate the considered robotic system based on such standards.\newline

To demonstrate, test and evaluate the system, there will be a physics simulation. Ultimately, there should also be a long-term test (e.g. one day) in the field with the
actual hardware that underlines the relevance of the approaches discussed in this work for practical applications.
However, since a mobile robot is a very complex system, there are arbitrary many technical barriers that could prevent such a long-term test in the real world.
The idea is therefore to be at least able to demonstrate the system in a sufficiently realistic simulation without depending on the success of such a real-world experiment.
In addition to serving as a backup for possible failures in real-world tests, a simulation naturally creates an environment that allows reproducible situations and thus
permits empirical investigation, which is a prerequisite for scientific evaluation.

\section{Prototypical System - Long-Term Autonomous Plant Monitoring Scenario}

The particular long-term scenario that is going to be considered in this work takes place in an agricultural context.
The idea is to enable a mobile robot to autonomously conduct 3D-Lidar scans of the plants on a field in order to monitor their growth progression and 
to detect certain features based on the growth state. Therefore, the robot has to be able to process the whole field continually without the need for human supervision,
including the requirement for repeated charge stops. For this purpose, there is a supporting infrastructure in the form of a container with an inductive charging station on site
establishing the power supply. Since the focus of the work is not going to be the scanning part, but to establish long-term autonomy, 
the actual detection of features etc. will be disregarded.\newline

The robotic system of consideration is going to be the AROX\footnote{Autonomous robotic experimentation platform} that is assumed to be able to autonomously drive to specified
coordinates if there exists a free path towards the goal position. The initial scenario will be modeled as a physics simulation in Gazebo\footnote{Open-source 3D robotics simulator} 
under the assumption that the robot is able to charge its battery as soon as it is located at certain coordinates as an initial simplification of the container infrastructure.
In practice, the real robot has a 3D-Lidar sensor (RIEGL) that is going to be used to scan the field parcels in order to detect features of the plants.
To simulate the scanning procedure, some kind of dummy node is required that allows to scan on command, i.e. to simulate scanning since we are not actually
interested in any scanning data. As such a setup is not yet completely integrated, the very first task of this work is going to be to create a working prototype of
the described scenario. A roboustly running integrated system as base case simulation that is going to be extended along the process.\newline

Subsequently, a plan is needed that determines the robot's route through the field as well as the whole scanning processes, i.e. when to drive to and process which parcel of the field.
For the basic prototypical system, it is simply assumed that the plans are generated by human operators. Therefore, a plan is going to be a CSV file of actions of two types.
The first type of action is \textsc{drive\_to(x, y)}, which leads the robot to drive to the specified coordinates (if possible). The second type of action is \textsc{scan},
which initiates a scanning procedure of the RIEGL sensor or an execution of the dummy node, respectively.\newline

Based on the dimensions of the particular field under consideration, it is not assured that one battery charge will be sufficient to process the whole field.
Thus, a key aspect of the scenario is going to be that the robot is not able to drive through all parcels of the field, take scans, and return to its base with one battery charge.
Instead, it has to stop in between because one battery charge is not going to suffice for one full mission. Additionally, there will be other conditions that cause
the robot to return to its base and preempt the plan execution, e.g. drastic weather changes. Afterwards, when the battery is recharged or some other cause of preemption
has been resolved, the robot has to continue the plan precisely from the point where it stopped.\newline

// TODO: read literature (in particular the LTA survey) - really no such systems in literature?
To the best of my knowledge, there is no fully integrated long-term autonomous solution in the literature that could be applied to the described scenario.

\section{Pause and Resume Plan Execution}

As stated before, a key aspect of the scenario is going to be that the robot is not able to complete its missions without preempting the plan execution.
Either due to insufficient battery capacity or other unmanageable conditions such as drastic weather changes that force the robot to interrupt its task.
So although the overall route may always be the same for the same field, there are certain stopping conditions that cause the robot to interrupt its 
active scanning tour and drive back to its base, i.e. the mobile container.
There are generally two relevant perspectives. First, such stops have to be considered at planning time by considering charge stops as crucial part of the plan.
Of course, this is only covering plannable stops such as expected battery consumption and is not able to deal with unplanned situations.
Therefore, a second perspective comes into play - the execution time. Here, the robot is executing a given plan and realizes that it has to interrupt the execution
due to some unexpected condition. In such a case, the plan execution has to be interrupted and the robot needs to be able to somehow save the current state of the plan
execution and continue with that state after the reason for the interruption has been resolved.
The idea is that the robot has to be able to pause and resume a given plan.\newline

// TODO: read literature - is there a solution for something like that? is it hard? just execute partial (remaining) plan afterwards?

\section{Plan Execution and Monitoring}

// TODO: is this going to be a focus of my work?\newline

Just as important as the planning itself, is the execution of the generated plan as well as monitoring the execution.
The idea is that the robot executes the plan and is somehow able to realize that something is not working as intended. 
The battery watchdog that is potentially going to be integrated is already a kind of monitoring tool, because it is able to recognize situations 
in which the batterly runs low although no charging stop is part of the plan at that time. However, an online monitoring which is able to constantly or time-triggered 
detect deviations of planning parameters and is able to trigger the replanning procedure if necessary would be very interesting.\newline

// TODO: that would assume that there is a planning procedure - there isn't at the moment, right?\newline
// TODO: of course I could just assume that there is one and just say "here I would replan"\newline

It would be really cool to develop a good plan-execution-monitoring node that is for example able to online adapt its planning domain etc.

\section{Long-Term Autonomy}

The considered scenario becomes long-term through the fact that not all scan positions can be processed in one battery cycle.
One battery cycle will be defined as sufficing to process a certain percentage of the scan positions and the planner should maximize the planned scan stops under the
constraint of not exceeding a safety buffer. \newline
An interesting question is how to actually define ``long-term''. [...] et al. do that as follows [...] The robot has a temporal radius of action that is based
on things like its battery capacity, maintenance intervals etc. In general, all processes that require a number of such cycles are considered to be long-term processes.
Accordingly, ``long-term'' can only be defined as a function of the system in question. To give an example, there could be a system that has very short battery intervals,
like a toy drone, based on the absolute time one would perhaps not consider a two hour experiment long-term, but if it includes several battery cycles, algorithmically
it can be considered a long-term process. Therefore, ``long-term'' is relative.

In the agricultural sector, there are processes that last much longer than a battery cycle, i.e. vegetation periods.
However, the seasonal cycle is not the sort of long-term that is going to be considered in this work. Because long-term processes are already present at much smaller scale.
On the one hand, there is the mission level, i.e. one processing of a whole field. One such mission can already be considered long-term, because the robot is not 
going to process the whole field with one battery load. The mission has to be preempted and continued later. That is the interesting part, the plan has to be paused,
the state has to be saved, and the scanning process has to be continued after the recharge. In the meantime, the environment could have changed, e.g. the weather conditions
or the illumination that could be relevant for certain sensors of the robot. On the other hand, there are going to be several such field processings during one vegetation
period, which makes it a long-term process of repeated missions. Therefore, it takes a number of battery cycles to process the whole field, and that mission is going to be
repeated every few days. Thus, there are two different long-term cycles that interlock.

Generally, there is not that much literature considering long-term autonomy, because it is not that easy to evaluate scientifically.\newline

\pagebreak

\textbf{Barriers for Long-Term Autonomous Systems}\newline

There are numerous potential problems for long-term autonomous systems that can cause failure and prevent the system from continuing its task.
Without claiming to be exhaustive, the following is a list of potential problems that, from a practical perspective, can prevent the smooth functioning
of long-term autonomous systems and are thus worthy of consideration:
\begin{itemize}
    \item battery failure / unexpected low battery
    \item drastic weather changes
    \item obstacles on the planned path
    \item hardware issues (e.g. sensor failure)
    \item lost connection (e.g. wifi) // TODO: what kind connections do we assume?
    \item lack of GPS signal
    \item certain dynamics (day / night) e.g. for sunlight-dependent sensors such as cameras
    \item full memory (not able to save further scans) -> data management
    \item to be continued...
\end{itemize}

The idea of the work will be to pick one to three of these aspects that are realistically solvable in the scope of the work and also somewhat interesting and 
relevant for practical scenarios. Those aspects should also be implemented in the simulation and solved purposefully.
One idea would be to block paths on the field in the simulation in a randomized fashion. The intent is to reproducibly make things that can go wrong actually go wrong.
And the question is what to do then? An example would be that the plan says we have to follow a certain path, but this path is blocked for some reason, we don't really
care about the nature of the obstacle here, that is not the point. It could just be a muddy path that the robot can't drive through. We assume a working obstacle detection
that is able to detect a certain class of obstacles. The integrative approach is then to find a way of dealing with such obstacles.

It is important to come up with definitions of such failure situations or classes (types) of such situations and how many there are very early in the work.

\section{Assumptions of the Work}

Obviously, it is out of the scope of this work to generally solve the problem of long-term autonomous plant monitoring with mobile robots.
Therefore, the work is going to be based upon a list of certain assumptions under which the developed integrated solution is going to be expected to work.
The starting point is a prototypical system that is able to work through a given plan (e.g. human provided), there is a plan executioner,
so the robot drives through the field and records scans.

// TODO: Do I want to assume perfect weather conditions for my work?\newline
The robot's mission to process the field should not start at random times, but based on certain criteria, e.g. weather conditions.
Especially when considering hyperspectral data, it is important that it is neither too sunny, nor too cloudy, ideally it should be grey and
foggy with uniform illumination. Of course, it's not trivial to predict the weather.

Generally, a fully integrated system is nice, but we have to think about which aspects to integrate and under which conditions / assumptions?

\section{Potentially Integrated Solutions}

In general, an integrative work benefits from many integrated solutions. Nevertheless, it should be doable in the scope of the work and robust.
Thus, there is a tradeoff between integrating as much as possible and therefore increasing the functionality and to stay doable and realistic and to not depend on too much.
Essentially a tradeoff between feasibility and ambition.\newline

\textbf{Battery Monitoring - Watchdog-Module}\newline

One solution that could be worth integrating is a watchdog module that observers the battery state and acts as a fail-safe. In general, the charge stops should
be part of the plan, i.e. be considered at planning time. Thus, there has to be resource planning for the missions that includes to be back at the base station before
the robot is out of battery. However, if it fails, there is the watchdog module that is able to react to wrong plans, i.e. the battery is low before expected and the 
robot has to return to its base. The module generally checks how far it is from the robot's current position to the base station, how much battery that would cost and
how battery it still has. In summary, the module is running at execution time, it is not planning the charge stops beforehand, it just reacts to failure cases, in which 
the robot has to preempt the plan execution, drive back to its base and recharge. Therefore, in general it is planned to have both. The charge stops have to be considered 
at planning time, so charging stops are part of the plan. Moreover, there is a monitoring process at execution time that looks for potential problems in this regard.\newline

\textbf{Autonomous Energy Supply}\newline

The first essential step towards long-term autonomy of an autonomous mobile robot is of course to ensure its power supply.
For this purpose, there is an inductive charging station, which is located in a mobile container on the field site.
Thus, the power supply could be realized by the integration of an autonomous docking / undocking solution, which enables the robot to detect
the container in a laser scan of its nearby surroundings, drive into it and dock to an inductive charging station.
To know when to trigger this docking procedure, it is crucial to have a process that monitors the battery level.\newline

\section{Scientific and/or technological background}

\textbf{Challenges}\newline

Based on the growth state of the plants, the planning has to be adapted, which has to be evaluated in the simulation, because a long-term test that reflects
seasonal changes would clearly be beyond the scope of this work. So, besides the need for a simulation in terms of potential hardware-related or other hurdles
that prevent practical testing, we have another motivation for the simulation, which are seasonal changes that are needed in order to evaluate the different
planning strategies. From a certain date, the plants are too high to drive above them and the scans have to be taken from a different spot, the whole strategy changes.
When the plants are small enough, the scans are taken from above, when they become too big, that's no longer possible.
That is a typical constraint in agricultural projects - the vegetation periods.
In March, when this work is expected to end, the plants are going to be relatively small such that the robot can drive above them when taking
scans, in the end of srping and summer that would no longer be possible and will be reflected in the simuation.

\section{Approach}

The idea is going to be to develop an architecture for a long-term autonomy setup, to provide lists of problems that can stand in its way and to provide solutions
and workarounds or at least the detection of some of them. The idea is to have a system that works in the end and that solves some problems.\newline

The plan is to start from the goal backwards with the question of what is required in order to end up with a long-term autonomous system that is
able to perform those scans with changing environment conditions etc. in the simulation and ideally in practice on the real hardware.
A physica simulation in Gazebo is created as part of the research project PORTAL and might be exteneded as part of this work, e.g. with weather conditions.\newline

The nature of the work is going to be integrative and application-oriented, many modules that are needed to solve the task at hand are available in principle, 
but it will be the goal of this work to identify those, evaluate them empirically for their particular part of the task and integrate them in a wholesome 
solution that is capable of providing an example of a robust solution for practical applications.\newline

The question is how to evaluate that? This is a classic problem in robotics, how can we scientifically argue that our approaches work? 
We will not be able to test it for a couple of years.
To evaluate the approaches empirically, we need statistics and thus a huge number of samples. To be able to generate those, we need a simulation
that is sufficiently meaningful, i.e. realistic.\newline

The idea will be to build something that wasn't there before (to the best of my knowledge) with the intent to show that it is possible - generative approach to knowledge gain.
This requires empiricism, you have to plausibly demonstrate that what was built works and is good in some way, not just simulation, but also define objective and then 
show that it works (in simulation often self-fulfilling prophecy).\newline

The initial goal will be to take the basic scenario we are already working on and extend it with an evaluation part. Then I generate obstacles and show that it no
longer works and with the solution I develop, it works again. Of course, one has to develop a criterion - three classes of situations:
\begin{enumerate}
    \item Robot breaks down and is not able to do anything
    \item Robot recognizes a problem, is not able to solve it, and calls a human operator
    \item Robot recognizes a problem and is able to solve it by itself
\end{enumerate}

The goal could be to increase the number of situations in which the robot can solve such problems by itself, or at least recognize the problem and call for help.
We need to be able to classify such situations. For example, we'd need to run a simulation and check every few minutes whether the robot got stuck.
If this work is able to get the robot to recognize situations in which it is stuck and somehow enable it to call for help, e.g. by a push message to
the phone of the human operator, that would be a progress. Moreover, if one could show that with the solution developed in this work, the number of failures
could be reduced by X percent distributed over e.g. 30 percent of cases where the robot recognizes a problem and calls the operator for help and 20 percent in which
it is even able to solve the problem by itself, that would really be interesting and relevant. We would have a performance criterion then that allows 
an empirical analysis.\newline

A first step would be to observe how it works without any solution I develop. So, how often does the robot get stuck in the simulation based on a certain failure
case. That of course assumes a working simulation, which we have in principle (Langsenkamp or even the empty world at first). The Langsenkamp simulation should
probably be increased, a larger excerpt has to be considered - just a question of the world.

\section{Expected scientific and/or technological contribution}

The idea of the long-term test is that the robot has to drive back to its charging station at least two times, otherwise it would be vacuous.
If possible, it would be good to include real weather data form the region of the test field.\newline

There are many problems / situations that can stand in the way of long-term autonomous mobile robots. In this work, a few of them are identified,
implemented in a simulation, systematicaly evaluated and solved to a degree. Basically reduce the barriers towards long-term autonomy of a mobile field
monitoring robot.

\section{Work program}

TBD.

% DON'T set \bibliographystyle here -- use the documentclass option instead
\bibliography{papers}

\end{document}
